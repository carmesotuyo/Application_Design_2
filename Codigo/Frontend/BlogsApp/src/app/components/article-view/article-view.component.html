<div class="article-view-container">
    <button (click)="goBack()">Volver</button>
    <button (click)="editArticle()">Editar</button>
    <button (click)="deleteArticle()">Eliminar</button>
    <h2>{{ article?.name }}</h2>
    

    <div *ngIf="article?.template === 0">
        <p>Autor: {{ article?.username }}</p>
        <img *ngIf="article?.image" [src]="getFirstImage()" alt="Imagen 1">
        <p>{{ article?.body }}</p>
    </div>

    <div *ngIf="article?.template === 1">
        <p>Autor: {{ article?.username }}</p>
        <p>{{ article?.body }}</p>
        <img *ngIf="article?.image" [src]="getFirstImage()" alt="Imagen 1">
    </div>

    <div *ngIf="article?.template === 2">
        <p>Autor: {{ article?.username }}</p>
        <img *ngIf="article?.image" [src]="getFirstImage()" alt="Imagen 1" class="in-line">
        <p>{{ article?.body }}</p>
    </div>

    <div *ngIf="article?.template === 3">
        <p>Autor: {{ article?.username }}</p>
        <img *ngIf="article?.image" [src]="getFirstImage()" alt="Imagen 1">
        <p>{{ article?.body }}</p>
        <img *ngIf="article?.image" [src]="getSecondImage()" alt="Imagen 2">
    </div>

    <div class="add-comment">
        <input type="text" [(ngModel)]="newComment" placeholder="Agregar un comentario">
        <button (click)="addComment()">Agregar</button>
    </div>

    <h3>Comentarios</h3>
    <hr>
    <ul>
        <ng-container *ngTemplateOutlet="commentTemplate; context: { $implicit: article?.commentsDtos }"></ng-container>
        <ng-template #commentTemplate let-comments>
            <li *ngFor="let comment of comments" class="comment-card">
                <div class="comment-header">
                <p>{{ comment.user.username }}:</p>
                    <p>{{ comment.body }}</p>
                    <div class="add-comment">
                        <input type="text" [(ngModel)]="newComment" placeholder="Agregar un comentario">
                        <button (click)="replyToComment(comment)">Enviar</button>
                    </div>
                </div>
                <ul *ngIf="comment.subComments.length > 0" class="sub-comments">
                    <ng-container
                        *ngTemplateOutlet="commentTemplate; context: { $implicit: comment.subComments }"></ng-container>
                </ul>
            </li>
        </ng-template>
    </ul>

    
</div>